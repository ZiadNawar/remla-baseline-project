  name: Multi-label-classification
  on: push
  jobs:
    init:
      runs-on: ubuntu-latest
      steps:
        - uses: actions/checkout@v2
        - name: Install python version
          # use the pyenv-action version 7
          uses: gabrielfalcao/pyenv-action@v7
          with:
            default: 3.8.6 # pick 3.8.6 verion
            command: pip install -U pip  # upgrade pip after installing python

        - name: create environment
          run: pyenv local 3.8.6 && python -mvenv .venv386

        - name: Install dependencies
          run: pip install -r requirements.txt --upgrade pip

        - name: debug pyenv
          run: echo ${{ steps.pyenv_installation.outputs.pyenv_root }}

        - name: run tests
          run : python tests.py

        - name: run static analysis
          run: pylint --load-plugins=dslinter --disable=all --enable=import,unnecessary-iteration-pandas,unnecessary-iteration-tensorflow,nan-numpy,chain-indexing-pandas,datatype-pandas,column-selection-pandas,merge-parameter-pandas,inplace-pandas,dataframe-conversion-pandas,scaler-missing-scikitlearn,hyperparameters-scikitlearn,hyperparameters-tensorflow,hyperparameters-pytorch,memory-release-tensorflow,deterministic-pytorch,randomness-control-numpy,randomness-control-scikitlearn,randomness-control-tensorflow,randomness-control-pytorch,randomness-control-dataloader-pytorch,missing-mask-tensorflow,missing-mask-pytorch,tensor-array-tensorflow,forward-pytorch,gradient-clear-pytorch,data-leakage-scikitlearn,dependent-threshold-scikitlearn,dependent-threshold-tensorflow,dependent-threshold-pytorch --output-format=json:report.json,text:report.txt,colorized --reports=y src/